# Here we will access
base_url: http://localhost
port: 4700
version_api: v1

title: Wholesale Customer Orders API
subtitle: API для доступа браузерных плагинов оптовых покупателей
description: "Оптовые клиенты alibaba24.ru могут установить себе браузерный плагин,
который позволяет откладывать нужные товары в корзину на alibaba24.ru путем внедрения
дополнительных кнопок и элементов на страницы товаров taobao.com.
API является веб-сервисом, который позволяет аутентифицировать клиента и сохранять заказы в базе данных"
footer: (c) Yury Batenko for alibaba24.ru 2015
original:
  # what will be printed into  formatted output, your "real" API URL
  base_url: http://apiwholesale.alibaba24.ru
  port:

# require arbitrary ruby file before starting tests
require:
# in case if you has preloaded ruby file, here you can
# call any ruby methods, say: Namespace::DB.clean() or smth
# also you could run any shell commands: 'my_script.sh -v clear_db'
run:
  before_all: \mongo localhost:27017/wsapi_test spec/fixtures/create_user.js 2>&1 >/dev/null
  after_all: \mongo localhost:27017/wsapi_test --eval "db.customers.drop();" 2>&1 >/dev/null
  before_each:
  after_each:
  on_error: exit # exit, alert, skip
headers:
  # exclude headers from resulting documentation
  exclude:

# where you define API endpoints
endpoints:
  # /{version_api}/ping
  ping:
    description: Base point for requesting stats
    params: Not expecting any parameters
    methods:
      get:
        -
          description: Simple endpoint
          headers:
            accept: application/json
          expect:
            code: 200
            content-type: application/json;charset=utf-8
        -
          headers:
          expect:
            code: 406
      post:
        -
          headers:
          expect:
            code: 406
      delete:
        -
          headers:
          expect:
            code: 406
      options:
        -
          headers:
          expect:
            code: 406
      head:
        -
          headers:
          expect:
            code: 406

  order:
    description: Operations with given order
    params: Doesn`t expect any params
    methods:
      get:
        -
          headers:
          expect:
            code: 406
      put:
        -
          headers:
          expect:
            code: 406
      delete:
        -
          headers:
          expect:
            code: 406
      options:
        -
          headers:
          expect:
            code: 406
      head:
        -
          headers:
          expect:
            code: 406

  orders:
    description: Operations with list of orders
    params: Doesn`t expect any params
    methods:
      get:
        -
          headers:
          expect:
            code: 406
      post:
        -
          headers:
          expect:
            code: 406
      options:
        -
          headers:
          expect:
            code: 406
      head:
        -
          headers:
          expect:
            code: 406

  session:
    description: Create session
    params: Doesn`t expect any params
    methods:
      post:
        -
          description: Create session sucesfully when login/pwd known. Returns token
          headers:
            content-type: application/json
          expect:
            code: 201
            headers:
              content-type:application/json
            body: "{token: 'some real token'}"
        -
          description: Return Forbidden when login/pwd unknown
          headers:
            content-type: application/json
          expect:
            code: 403
      delete:
        -
          headers:
          expect:
            code: 406
      options:
        -
          headers:
          expect:
            code: 406
      head:
        -
          headers:
          expect:
            code: 406
